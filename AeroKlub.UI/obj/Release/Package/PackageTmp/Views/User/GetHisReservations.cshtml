@model AeroKlub.UI.Models.PlaneListViewModel
@using System.Globalization

@{
	Layout = null;
}

<!DOCTYPE html>

<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<title>Twoje rezerwacje</title>


	<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
	<script src="~/Scripts/jquery-3.3.1.min.js"></script>
	<script src="~/Scripts/bootstrap.min.js"></script>

	<style>
		body{
			padding-top: 70px;
		}
	</style>
</head>
<body>
	<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand">Areo Klub</a>

		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item">
					@Html.ActionLink("Home", "Index", "User", new { Name = Model.Name, NickName = Model.NickName }, new { @class = "nav-link" })
				</li>
				<li class="nav-item">
					@Html.ActionLink("Twoje rezerwacje", "GetHisReservations", "User", new { Name = Model.Name, NickName = Model.NickName } , new { @class = "nav-link" })
				</li>
				<li class="nav-item">
					@Html.ActionLink("Wyloguj", "Login", "Login", new { Clear = true }, new { @class = "nav-link" })
				</li>
			</ul>
		</div>
	</nav>

	<div class="container-fluid">
		<table class="table table-bordered">
			<thead>
				<tr>
					<th>
						Nazwa samolotu
					</th>
					<th>
						Data
					</th>
					<th>
						W godzinach
					</th>
					<th>
						Akcje
					</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var reservation in Model.Reservations)
				{
					if (reservation.By == Model.Name)
					{
						<tr>
							<td>
								@reservation.PlaneName
							</td>
							<td>
								@reservation.Date
							</td>
							<td>
								Od @reservation.From do @reservation.To
							</td>
							<td>
								@if (DateTime.ParseExact(reservation.Date, "dd.MM.yyyy", CultureInfo.InvariantCulture) >= DateTime.Today)
								{
									<div>
										@Html.ActionLink("Odwołaj rezerwacje", "DeleteReservation", "User", new { Name1 = Model.Name, ID = reservation.ReservationID }, new {@class="btn btn-danger" })
									</div>


								}

							</td>
						</tr>
					}
				}
			</tbody>
		</table>
	</div>
</body>
</html>
